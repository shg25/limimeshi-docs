# Claude Code改善提案コマンド

**役割**：会話履歴を分析し、CLAUDE.mdへの追記やClaude Code機能の活用を提案する

**重要**：会話の要約や説明ではなく、「具体的な改善提案」を出力すること

## 提案の種類

会話履歴を分析し、以下の改善を提案する：

| 種類 | 用途 | 提案基準 |
|------|------|---------|
| **CLAUDE.md追記** | プロジェクトルール | 繰り返し適用されるルール |
| **Custom Slash Command化** | ワークフロー自動化 | 繰り返し使う一連の処理 |
| **Agent Skill化** | 自動適用チェック | 常にチェックすべき項目 |
| **Claude Code Hook化** | ツール操作時トリガー | 特定操作時に必ず確認すべき事項 |
| **MCPサーバー化** | 外部ツール連携 | 外部APIやツールとの頻繁な連携 |

## 分析基準

### 1. プロジェクト独自のルール → CLAUDE.md追記

標準的なコードを生成後、プロジェクト固有の方法に修正指示が行われた場合

例：
- 環境変数ではなくプロジェクト独自のConfigモジュール使用
- Firebase固有のパターン
- React Admin固有の実装パターン

### 2. 繰り返しのワークフロー → Custom Slash Command化

同じ一連の処理を複数回実行

例：
- 特定形式のファイル生成
- 定型的なコードレビュー手順
- リリース前チェックリスト

### 3. 常時チェック項目 → Agent Skill化

毎回確認すべき項目や知識

例：
- セキュリティチェック（機密情報検出）
- コーディング規約チェック
- ドキュメントスタイルチェック

### 4. ツール操作時の確認 → Claude Code Hook化

特定のツール操作時に必ず確認すべき事項

例：
- ファイル編集後のセキュリティチェック
- Bashコマンド実行前の安全確認
- コミット前のスタイルチェック

### 5. 外部連携の自動化 → MCPサーバー化

外部APIやツールとの頻繁な連携

例：
- Firebase Admin SDK操作の効率化
- GitHub API連携（Issue/PR操作）
- Slack通知連携

## 出力フォーマット

### 提案がある場合

```
会話履歴を分析しました。以下の改善を提案します：

## 1. [提案の種類]

### 提案内容
[具体的な内容]

### 該当する会話
- [どの会話でこのパターンが発見されたか]

### 実装方法
[どのファイルに何を追加するか]

---

## 2. [次の提案]
...
```

### 提案がない場合

```
会話履歴を分析しましたが、新しい改善提案は見つかりませんでした。

既存の設定で十分にカバーされています。
```

## 提案基準

**提案する**：
- プロジェクト全体で共有すべき普遍的なルール
- 今後も繰り返し適用されるパターン
- 自動化により効率化できる処理

**提案しない**：
- 一時的な判断や状況依存の対応
- 既に設定済みの内容
- 過度に複雑な自動化（シンプルさを優先）

## 関連ファイル

| ファイル | 用途 |
|---------|------|
| `CLAUDE.md` | プロジェクトルール |
| `.claude/commands/*.md` | Custom Slash Commands |
| `.claude/skills/*.md` | Agent Skills |
| `.claude/settings.json` | Claude Code Hooks設定 |
| `governance/constitution.md` | 開発原則 |
| `governance/docs-style-guide.md` | ドキュメントルール |

## 参考

このコマンドは以下の記事を参考に作成：
https://zenn.dev/appbrew/articles/7eb12fff5738f4
