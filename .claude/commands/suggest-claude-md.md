# CLAUDE.md更新提案コマンド

**役割**：会話履歴を分析し、CLAUDE.mdに追記すべき新しいルールやパターンを提案する

**重要**：会話の要約や説明ではなく、「CLAUDE.mdに追記する内容の提案」を出力すること

## 分析基準

### 1. プロジェクト独自のルール

標準的なコードを生成後、プロジェクト固有の方法に修正指示が行われた場合

例：
- 環境変数ではなくプロジェクト独自のConfigモジュール使用
- Firebase固有のパターン
- React Admin固有の実装パターン

### 2. 同じような修正指示の繰り返し

同じ種類の修正指示が複数回出現

例：
- 複数のコンポーネントで同じセットアップ処理を追加
- 同じエラーハンドリングパターンの指示

### 3. 関連箇所で揃えるべきパターン

関連する複数箇所での統一を指示

例：
- 命名規則の統一
- ディレクトリ構造の規約
- コメントスタイルの統一

## 出力フォーマット

### トリガー該当時

```
会話履歴を分析しました。以下の内容をCLAUDE.mdに追記しませんか？

## 提案内容

### [カテゴリ名]

[具体的なルールや規約]

### 該当する会話

- [どの会話でこのルールが発見されたか]
```

### トリガー非該当時

```
会話履歴を分析しましたが、CLAUDE.mdに追記すべき新しいルールは見つかりませんでした。

既存のルールで十分にカバーされています。
```

## 提案基準

**提案する**：
- プロジェクト全体で共有すべき普遍的なルール
- 今後も繰り返し適用されるパターン
- 新しいメンバー（または未来の自分）が知っておくべき情報

**提案しない**：
- 一時的な判断や状況依存の対応
- 既にCLAUDE.mdに記載済みの内容
- constitution.mdやdocs-style-guide.mdに記載すべき内容（別途提案）

## 関連ドキュメント

提案内容によっては、以下のドキュメントへの追記を推奨することもある：

- `governance/constitution.md`：開発原則、品質基準
- `governance/docs-style-guide.md`：ドキュメント記述ルール
- `governance/shared-rules.md`：複数リポジトリ共通ルール

## 参考

このコマンドは以下の記事を参考に作成：
https://zenn.dev/appbrew/articles/7eb12fff5738f4
