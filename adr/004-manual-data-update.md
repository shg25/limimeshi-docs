# ADR-004: 完全手動運用の選定理由

**Status**: 承認済み
**Date**: 2025-11-16
**Author**: 重次弘規
**Related**: [memory/constitution.md](../memory/constitution.md), [planning/first-idea.md](../planning/first-idea.md)

## Context

期間限定めし（リミメシ）は、チェーン店の期間限定メニュー情報を収集・提供するサービスである。

### データ収集方法の選択肢

**Phase2（MVP）でのデータ収集方法**:
1. **完全手動運用**：管理画面から手動で登録・更新
2. **半自動運用**：スクレイピング + 手動確認
3. **完全自動運用**：スクレイピング + 自動登録

### 検討すべき課題

#### 法的リスク
- チェーン店の利用規約（スクレイピング禁止条項）
- 著作権法（データベースの著作権）
- 不正アクセス禁止法（サーバー負荷）

#### 運用コスト
- データ収集の手間
- データ検証の手間
- システム保守の手間

#### データ品質
- 情報の正確性
- 更新頻度
- 情報の網羅性

### 対象チェーン店の利用規約調査

**Phase2対象チェーン店（16店舗）**:
- マクドナルド、モスバーガー、ケンタッキー、バーガーキング
- 吉野家、すき家、松屋、なか卯
- スシロー、はま寿司、くら寿司、かっぱ寿司
- ドミノピザ、ピザハット
- スターバックス、ドトール

**利用規約の典型的な条項**:
> 「本サイトの情報を自動的に収集するプログラム（スクレイピング、クローリング等）を使用することを禁止します」

**法的リスク**:
- 利用規約違反 → 民事訴訟（損害賠償請求）
- 著作権侵害 → 著作権法違反（刑事罰）
- サーバー負荷 → 不正アクセス禁止法違反（刑事罰）

## Decision

**Phase2（MVP）では完全手動運用を採用する**

Phase3以降は、チェーン店との公式提携・API連携を検討する。

### 選定理由

#### 1. 法的リスクゼロ（最重要）

**完全手動運用**:
- ✅ 利用規約違反なし（公式サイトを人間が閲覧）
- ✅ 著作権侵害なし（事実情報のみ抽出）
- ✅ 不正アクセスなし（正常なブラウジング）
- ✅ チェーン店との関係良好（将来の公式提携に有利）

**半自動運用**:
- ❌ 利用規約違反の可能性（スクレイピング禁止条項）
- ❌ 民事訴訟リスク（損害賠償請求）
- ❌ サービス停止リスク（裁判所からの差し止め請求）

**完全自動運用**:
- ❌ 利用規約違反の可能性（スクレイピング禁止条項）
- ❌ 民事訴訟リスク（損害賠償請求）
- ❌ 刑事罰リスク（不正アクセス禁止法違反）

#### 2. Constitution V. Legal Risk Zero（憲法遵守）

**Constitution V. Legal Risk Zero**より：
> - **Phase2**：完全手動運用でスタート
>   - データ登録・更新は完全手動
>   - スクレイピング・自動クローリングは一切行わない
>   - チェーン店の利用規約を完全遵守
> - **Phase3以降**：公式提携・API連携を検討
>   - チェーン店との公式提携後のみ自動化を許可
>   - 相手側の明示的な許可を得てから実施

**判断**: Constitution遵守のため、Phase2では完全手動運用

#### 3. Phase2の現実的な運用負荷

**Phase2の想定データ量**:
- チェーン店数：16店舗
- 1店舗あたりのメニュー数：平均10件（年間）
- 合計メニュー数：約160件/年
- 月間更新数：約13件/月（160件 ÷ 12ヶ月）

**手動運用の工数**:
- 1件あたりの登録時間：5分（チェーン店選択、メニュー名入力、価格入力、期間入力）
- 月間工数：約65分/月（13件 × 5分）
- **判断**: 月1時間程度の作業で許容範囲

#### 4. データ品質の確保

**完全手動運用**:
- ✅ 人間が目視で確認（誤情報を防止）
- ✅ メニュー名・価格・期間の正確性が高い
- ✅ 画像URL・X Post URLを手動で選別（高品質）

**半自動運用**:
- ❌ スクレイピングの精度に依存（HTML構造変更で動作不良）
- ❌ 誤情報のリスク（スクレイピング失敗）
- ❌ 手動確認が必要（結局、手動運用と同じ工数）

**完全自動運用**:
- ❌ スクレイピングの精度に依存
- ❌ 誤情報のリスク（ユーザーに誤った情報を提供）

#### 5. Phase2の目的（MVP検証）

**Phase2の成功条件**:
- 50人のベータユーザーから好意的なフィードバック
- サービスの価値仮説を検証

**判断**:
- Phase2の目的は「サービスの価値仮説検証」であり、「大量データ収集」ではない
- 16店舗、160件/年のデータで十分検証可能
- 運用負荷（月1時間）は許容範囲

### 比較表

| 評価軸 | 完全手動 | 半自動 | 完全自動 |
|--------|----------|--------|----------|
| **法的リスク** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐ |
| **憲法遵守** | ⭐⭐⭐⭐⭐ | ⭐ | ⭐ |
| **運用負荷** | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **データ品質** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| **Phase2適合** | ⭐⭐⭐⭐⭐ | ⭐⭐ | ⭐ |

## Consequences

### メリット

#### 法的リスクゼロ
- 利用規約違反なし
- 著作権侵害なし
- 不正アクセスなし
- チェーン店との関係良好（将来の公式提携に有利）

#### Constitution遵守
- Constitution V. Legal Risk Zero を遵守
- プロジェクトの基本方針に従う

#### データ品質
- 人間が目視で確認（誤情報を防止）
- メニュー名・価格・期間の正確性が高い

#### Phase2の目的達成
- 16店舗、160件/年のデータで価値仮説検証可能
- 運用負荷（月1時間）は許容範囲

### デメリットと対策

#### 運用負荷
- **制約**: 月1時間の手動運用が必要
- **対策**:
  - Googleアラート・RSSリーダーで情報収集を効率化
  - AI補助ツール（ChatGPT等）で事実情報抽出を効率化
  - Phase3で公式提携・API連携を検討

#### 更新頻度
- **制約**: 手動運用のため、リアルタイム更新は困難
- **対策**: 週1回の定期更新で運用（Phase2では許容）

#### 網羅性
- **制約**: 全てのメニューを網羅できない可能性
- **対策**: 主要メニューのみ登録（Phase2では許容）

### 実装時の注意点

#### 管理画面での手動登録

**チェーン店登録**:
1. Firebase Console で管理者ユーザーを作成
2. limimeshi-admin にログイン
3. 「Chains」メニューから「CREATE」をクリック
4. フォームに入力（チェーン名、ふりがな、公式サイトURL、ロゴURL）
5. 「SAVE」をクリック

**メニュー登録**:
1. 「Menus」メニューから「CREATE」をクリック
2. フォームに入力（チェーン選択、メニュー名、説明、価格、販売期間）
3. 「SAVE」をクリック

#### 情報収集の効率化

**Googleアラート**:
- キーワード：「マクドナルド 期間限定」「モスバーガー 新商品」等
- 頻度：1日1回
- 配信先：メールアドレス

**RSSリーダー**:
- 各チェーン店の公式サイトのRSSフィードを登録
- 新着情報を自動収集

**AI補助ツール**:
- ChatGPT等で公式サイトのテキストから事実情報を抽出
- メニュー名・価格・期間を効率的に取得

#### データ検証

**登録前の確認**:
- 公式サイトで情報を確認
- メニュー名・価格・期間の正確性を検証
- 画像URL・X Post URLの妥当性を確認

**登録後の確認**:
- limimeshi-web で表示を確認
- 誤情報があれば即座に修正

### Phase3以降の展開

#### 公式提携・API連携

**Phase3の目標**:
- チェーン店との公式提携
- API連携による自動データ取得
- リアルタイム更新

**実現方法**:
1. Phase2で価値仮説を検証（50人のベータユーザー）
2. Phase3で月間1,000人のアクティブユーザー達成
3. チェーン店にサービス価値を提示
4. 公式提携・API連携を交渉
5. 相手側の明示的な許可を得てから自動化

**判断**: Phase2では完全手動運用、Phase3以降で自動化を検討

## Notes

- Constitution V. Legal Risk Zero を遵守
- planning/first-idea.md に記載されている「スクレイピング禁止」方針に従う
- Phase2では運用負荷を許容（月1時間程度）
- Phase3以降で公式提携・API連携を検討
